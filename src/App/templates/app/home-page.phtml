<?php $this->layout('layout::default', ['title' => 'Home']) ?>

<p>Logged in as <?= $caseworker['name'] ?></p>

<h2>Your outstanding claims</h2>

<table>
    <thead>
    <tr>
        <th>Case / ref number</th>
        <th>Donor name</th>
        <th>Date received</th>
        <th>Date claim modified</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <?php foreach ($caseworker['assignedCases'] as $assignedCase) { ?>
        <tr>
            <td><?= $assignedCase->getReferenceNumber() ?></td>
            <td><?= $assignedCase->getDonorName() ?></td>
            <td><?= $assignedCase->getReceivedDateTime()->format('d/m/Y') ?></td>
            <td><?= ($assignedCase->getUpdatedDateTime() ?: $assignedCase->getReceivedDateTime())->format('d/m/Y') ?></td>
            <td>View</td>
        </tr>
    <?php } ?>
    </tbody>
</table>

<h2>All claims</h2>

<table>
    <thead>
        <tr>
            <th>Case / ref number</th>
            <th>Donor name</th>
            <th>Date received</th>
            <th>Date claim modified</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
    <?php foreach ($cases as $case) { ?>
        <tr>
            <td><?= $case->getReferenceNumber() ?></td>
            <td><?= $case->getDonorName() ?></td>
            <td><?= $case->getReceivedDateTime()->format('d/m/Y') ?></td>
            <td><?= ($case->getUpdatedDateTime() ?: $case->getReceivedDateTime())->format('d/m/Y') ?></td>
            <td><?= $case->getStatus() ?></td>
        </tr>
    <?php } ?>
    </tbody>
</table>

<p><a href="/cases/caseworker">Case worker user page</a></p>
<p><a href="/cases/reporting">Reporting user page</a></p>
<p><a href="/cases/refund">Refund manager user page</a></p>
<p><a href="/cases/admin">Admin user page</a></p>
<p><a href="/cases/download">Download SSCL spreadsheet</a></p>

<p><a href="sign-out">Sign out</a></p>
